<?php
require_once '../../../configuration.php';
include('functions2018.pdf.php');
include('table_used.php');


$id = $_GET['id'];
$_user = _user(_decrypt($_SESSION['SESSION_USER']));


$queryq = $db->query("select *  from [NAV RAIFFEISEN].[dbo].[RAIFFAISEN BANK" . '$' . "Vacation Ground 2] as v
	join  " . $nav_employee . "  as e on v.[Employee No_] = e.[No_]
	join $database_used.[users] as u on u.employee_no = e.[No_]
  where '" . $_GET['id'] . "' = v.id ");
$data = $queryq->fetch(PDO::FETCH_ASSOC);


$queryq = $db->query("select o.[Entity Code]  from [NAV RAIFFEISEN].[dbo].[RAIFFAISEN BANK" . '$' . "Employee Contract Ledger] as c join [NAV RAIFFEISEN].[dbo].[RAIFFAISEN BANK" . '$' . "ORG Dijelovi] as o on o.Code=c.[Org Dio] and o.GF=c.[GF rada code] where [Show Record] = 1 and [Employee No_]=" . $data['Employee No_'] . " and [Starting Date] <= '" . $data['Insert Date'] . "' and ([Ending Date] >= '" . $data['Insert Date'] . "' or  [Ending Date] = '1753-01-01 00:00:00.000') ");
$dataq = $queryq->fetch(PDO::FETCH_ASSOC);

$entitet = $dataq['Entity Code'];

$entitet_data = [
    10009 => 'FBiH',
    2074 => 'FBiH',
    9869 => 'FBiH',
    9864 => 'FBiH',
    9861 => 'FBiH',
    982 => 'RS',
    975 => 'FBiH',
    974 => 'FBiH',
    9734 => 'FBiH',
    965 => 'RS',
    963 => 'FBiH',
    960 => 'FBiH',
    9551 => 'FBiH',
    9547 => 'FBiH',
    9542 => 'FBiH',
    9536 => 'FBiH',
    9498 => 'FBiH',
    9480 => 'FBiH',
    943 => 'FBiH',
    9382 => 'FBiH',
    9379 => 'FBiH',
    9368 => 'FBiH',
    9339 => 'FBiH',
    9295 => 'FBiH',
    929 => 'FBiH',
    92 => 'FBiH',
    894 => 'FBiH',
    8898 => 'RS',
    8784 => 'FBiH',
    8782 => 'FBiH',
    873 => 'FBiH',
    8710 => 'FBiH',
    8698 => 'FBiH',
    8672 => 'FBiH',
    8671 => 'FBiH',
    856 => 'FBiH',
    849 => 'FBiH',
    842 => 'FBiH',
    8295 => 'FBiH',
    8116 => 'FBiH',
    803 => 'FBiH',
    8012 => 'FBiH',
    7756 => 'FBiH',
    774 => 'FBiH',
    7674 => 'FBiH',
    7570 => 'FBiH',
    757 => 'FBiH',
    7474 => 'FBiH',
    746 => 'FBiH',
    7423 => 'FBiH',
    7384 => 'FBiH',
    736 => 'FBiH',
    7229 => 'FBiH',
    721 => 'FBiH',
    7194 => 'FBiH',
    7105 => 'FBiH',
    7037 => 'FBiH',
    7018 => 'FBiH',
    700 => 'FBiH',
    6999 => 'FBiH',
    6974 => 'FBiH',
    6960 => 'FBiH',
    6936 => 'FBiH',
    6924 => 'FBiH',
    664 => 'FBiH',
    614 => 'FBiH',
    60 => 'FBiH',
    6 => 'FBiH',
    592 => 'FBiH',
    580 => 'FBiH',
    579 => 'FBiH',
    513 => 'RS',
    503 => 'FBiH',
    453 => 'FBiH',
    429 => 'FBiH',
    428 => 'FBiH',
    421 => 'FBiH',
    4185 => 'FBiH',
    4025 => 'FBiH',
    4004 => 'FBiH',
    383 => 'FBiH',
    370 => 'BD',
    366 => 'BD',
    344 => 'FBiH',
    340 => 'FBiH',
    336 => 'FBiH',
    318 => 'FBiH',
    307 => 'FBiH',
    285 => 'FBiH',
    270 => 'FBiH',
    251 => 'FBiH',
    25 => 'FBiH',
    239 => 'FBiH',
    2093 => 'FBiH',
    2079 => 'FBiH',
    2077 => 'RS',
    2075 => 'FBiH',
    2074 => 'FBiH',
    2067 => 'FBiH',
    2018 => 'RS',
    2009 => 'RS',
    2008 => 'RS',
    2005 => 'FBiH',
    1999 => 'FBiH',
    1992 => 'FBiH',
    1983 => 'FBiH',
    1973 => 'BD',
    1970 => 'FBiH',
    1963 => 'FBiH',
    1943 => 'FBiH',
    194 => 'FBiH',
    192 => 'FBiH',
    1918 => 'FBiH',
    1914 => 'FBiH',
    1906 => 'FBiH',
    1896 => 'RS',
    1893 => 'FBiH',
    188 => 'FBiH',
    1863 => 'FBiH',
    1853 => 'FBiH',
    1851 => 'FBiH',
    1848 => 'FBiH',
    1843 => 'FBiH',
    1821 => 'FBiH',
    1820 => 'FBiH',
    181 => 'FBiH',
    1778 => 'FBiH',
    1728 => 'FBiH',
    172 => 'FBiH',
    1718 => 'FBiH',
    1681 => 'FBiH',
    1674 => 'FBiH',
    1664 => 'FBiH',
    1646 => 'FBiH',
    1595 => 'FBiH',
    1590 => 'FBiH',
    1572 => 'RS',
    1541 => 'FBiH',
    1511 => 'FBiH',
    1486 => 'FBiH',
    1482 => 'FBiH',
    1478 => 'RS',
    1474 => 'FBiH',
    1471 => 'BD',
    1454 => 'FBiH',
    1452 => 'FBiH',
    1398 => 'RS',
    1364 => 'FBiH',
    1357 => 'FBiH',
    1356 => 'FBiH',
    13472 => 'FBiH',
    13311 => 'FBiH',
    13282 => 'FBiH',
    13165 => 'FBiH',
    1310 => 'FBiH',
    1309 => 'FBiH',
    13076 => 'FBiH',
    1306 => 'FBiH',
    13012 => 'FBiH',
    1294 => 'RS',
    12840 => 'FBiH',
    12838 => 'FBiH',
    12837 => 'FBiH',
    12815 => 'FBiH',
    12649 => 'FBiH',
    12602 => 'FBiH',
    12600 => 'FBiH',
    12588 => 'FBiH',
    1258 => 'FBiH',
    12563 => 'FBiH',
    12487 => 'FBiH',
    1245 => 'FBiH',
    1241 => 'FBiH',
    12345 => 'RS',
    12310 => 'FBiH',
    12258 => 'FBiH',
    12229 => 'FBiH',
    122 => 'FBiH',
    12192 => 'FBiH',
    12188 => 'FBiH',
    12165 => 'FBiH',
    12163 => 'FBiH',
    12161 => 'FBiH',
    11907 => 'FBiH',
    11705 => 'FBiH',
    11681 => 'FBiH',
    11666 => 'FBiH',
    11614 => 'FBiH',
    11588 => 'FBiH',
    11585 => 'FBiH',
    1158 => 'FBiH',
    11481 => 'FBiH',
    11462 => 'FBiH',
    11460 => 'FBiH',
    11457 => 'FBiH',
    11452 => 'FBiH',
    11448 => 'FBiH',
    1144 => 'FBiH',
    11414 => 'FBiH',
    1138 => 'FBiH',
    11310 => 'FBiH',
    1131 => 'FBiH',
    11307 => 'FBiH',
    11272 => 'FBiH',
    11220 => 'FBiH',
    11218 => 'FBiH',
    11213 => 'FBiH',
    1121 => 'FBiH',
    11168 => 'FBiH',
    11141 => 'FBiH',
    11118 => 'FBiH',
    11116 => 'FBiH',
    11056 => 'FBiH',
    11055 => 'FBiH',
    11054 => 'FBiH',
    11048 => 'FBiH',
    1103 => 'RS',
    11002 => 'FBiH',
    11000 => 'FBiH',
    10992 => 'FBiH',
    1086 => 'FBiH',
    1084 => 'FBiH',
    10825 => 'FBiH',
    1081 => 'FBiH',
    10803 => 'FBiH',
    10702 => 'FBiH',
    10699 => 'FBiH',
    10693 => 'FBiH',
    10680 => 'FBiH',
    10670 => 'FBiH',
    10663 => 'FBiH',
    1064 => 'FBiH',
    10635 => 'FBiH',
    10586 => 'FBiH',
    1053 => 'FBiH',
    10511 => 'FBiH',
    10485 => 'FBiH',
    10306 => 'FBiH',
    10103 => 'FBiH',
    10102 => 'FBiH',
    10091 => 'FBiH',
    1001 => 'FBiH'
];

if (array_key_exists($data['Employee No_'], $entitet_data)) {
    $entitet = $entitet_data[$data['Employee No_']];
}

$vacation_data[0] = 0;

switch (strtolower($entitet)) {
    case "fbih":
        generatepdf('fbih', $_user, $data, $vacation_data[0]);
        break;

    case "rs":
        generatepdf('rs', $_user, $data, $vacation_data[0]);
        break;

    case "bd":
        generatepdf('bd', $_user, $data, $vacation_data[0]);
        break;
}
//generatepdf('fbih', $_user, $data, $vacation_data[0]);
//generatepdf('rs', $_user, $data, $vacation_data[0]);
//generatepdf('bd', $_user, $data, $vacation_data[0]);
	  